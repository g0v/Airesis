<div id="new_invitation" title="<%= t('pages.groups.invite_your_friends.title')%>" style="display: none; font-size: 14px;">
<%= form_for @group_invitation, :html => {:class=>"disableForm"}, :remote => true do |f| %>

  <div class="field">
    <%= f.label :emails_list %><br />
    <%= f.text_field :emails_list %>
  </div>
  <div class="field">
    <%= f.label :text %><br />
    <%= f.text_area :testo, placeholder: t('pages.groups.invite_your_friends.text_to_send'), style: "width:400px;height:100px;" %>
  </div>

  <div class="actions">
    <%= f.hidden_field :group_id%>
    <%= f.submit t('buttons.send'), class: "btn blue inviteButton" %>
  </div>
<% end %>
</div>


<script type="text/javascript">
  $(function() {
      $('#group_invitation_emails_list').tokenInput([], {
          theme: "facebook",
          crossDomain: false,
          allowFreeTagging: true,
          hintText: "<%=t('pages.groups.invite_your_friends.type_email_addresses')%>",
          searchingText: "<%=t('pages.groups.invite_your_friends.type_email_addresses')%>",
          invalidTokenText: "<%=t('pages.groups.invite_your_friends.email_not_valid')%>",
          preventDuplicates: true,
          allowTabOut: true,
          tokenValidation: function(item) {
              var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
              return re.test(item.name);
          },
          avoidBlank: true
      });
  });
</script>