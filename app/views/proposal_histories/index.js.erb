$('#proposal_histories_container').append("<%= escape_javascript(render(:partial => 'proposal_histories/panel'))%>");

$('#proposal_histories').dialog({modal:true,
									height:400,
									resizable: true,
									width:Math.min(1042, $(window).width()-100),
     open: function() {
         $('html').css('overflow', 'hidden');
         $('.ui-widget-overlay').width($(".ui-widget-overlay").width() + 18);
         $(window).bind('resize',function (e) {
            console.log('resize');
             console.log(e.target);
            if (e.target == $(window)[0]) {
                $("#proposal_histories").dialog("option", "width", Math.min(1042, $(window).width()-100));
                $("#proposal_histories").dialog("option", "position", "center");
            }
         });
     },
	 close: function(event, ui){ 
          $(this).dialog('destroy');
          $('#proposal_histories').remove();
          $('html').css('overflow', '');
     }
});
